#!/usr/bin/bash
# This is really just a helper for the init.d script.
# If you want to run the program manually, you're probably better off just
# running python itself.

# First, figure out where we're installed so that we know how to find the
# main module.  We do this with a combination of $0 and (maybe) $PWD.

# ${0:0:1} returns the first character of the $0 string
if [ ${0:0:1} == "/" ]
then
  # OK, called from an absolute path, just strip off the /bin
  STATS_HOME=`dirname $0`
else
  # Relative path - prepend $PWD
  STATS_HOME="${PWD}/`dirname $0`"
fi

# Chop off the '/bin' at the end of STATS_HOME.
# (Note that if STATS_HOME doesn't end with '/bin', this command won't
# change anything.  In that case, we should probably spit out a warning.)
STATS_HOME=${STATS_HOME%/bin}


# Next, try to figure out the MANTIDPATH environment variable
# NOTE: For now, we want to use mantidnightly, if it exists.
# Once the next release comes out, we can just go with regular mantid
if [ -z $MANTIDPATH ]
then
	if [ -d /opt/mantidnightly ]
	then
		export MANTIDPATH=/opt/mantidnightly/bin
	else
		export MANTIDPATH=/opt/Mantid/bin
	fi
fi


python $STATS_HOME/lib/mantidstats/main.py "$@" 2>/dev/null >/dev/null &
